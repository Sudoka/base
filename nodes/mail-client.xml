<?xml version="1.0" standalone="no"?>

<kickstart>

  <description>
  
  Mail support for nodes in the cluster. These nodes do not accept
  mail for local delivery. They pass everything to a mail hub (generally
  the frontend).

  </description>


  <changelog>
  $Log: mail-client.xml,v $
  Revision 1.1  2007/12/10 21:28:33  bruno
  the base roll now contains several elements from the HPC roll, thus
  making the HPC roll optional.

  this also includes changes to help build and configure VMs for V.

  Revision 1.6  2005/02/16 00:40:04  mjk
  graph cleanup

  Revision 1.5  2004/04/21 08:13:06  fds
  Tweaks

  Revision 1.4  2004/04/21 07:34:37  fds
  Keep mail to root@foo.com on the frontend. This retains mail bounce alerts
  and such locally like we want it.

  Revision 1.3  2004/03/08 23:14:19  fds
  Here is Postfix.

  Revision 1.2  2004/03/05 01:18:17  fds
  Postfix tweaks.

  Revision 1.1  2004/03/04 19:33:32  fds
  Moving from sendmail to Postfix.

  </changelog>

<post>

<file name="/etc/postfix/main.cf" mode="append">
#
# Rocks Postfix configuration for cluster nodes.
#
mydestination = 
relayhost = <var name="Kickstart_PrivateGateway"/>
masquerade_domains = <var name="Kickstart_PrivateDNSDomain"/>
append_dot_mydomain = no
canonical_maps = hash:/etc/postfix/canonical
</file>

<file name="/etc/postfix/canonical" mode="append">
root root@<var name="Kickstart_PrivateDNSDomain"/>
</file>

/usr/sbin/postmap /etc/postfix/canonical

</post>

</kickstart> 
