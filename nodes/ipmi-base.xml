<?xml version="1.0" standalone="no"?>

<kickstart>

	<description>

	Common IPMI Support

	</description>

	<copyright>
	Copyright (c) 2000 - 2009 The Regents of the University of California.
	All rights reserved. Rocks(r) v5.2 www.rocksclusters.org
	</copyright>

	<changelog>
	$Id: ipmi-base.xml,v 1.2 2009/10/28 07:03:48 mjk Exp $
	</changelog>


	<package>OpenIPMI-python</package>
	<package>OpenIPMI-devel</package>
	<package>OpenIPMI</package>
	<package>OpenIPMI-perl</package>
	<package>OpenIPMI-libs</package>
	<package>OpenIPMI-tools</package>

<post>

if /usr/sbin/dmidecode | fgrep IPMI
then
	/sbin/chkconfig ipmi on
else
	/sbin/chkconfig ipmi off
fi


<file name="/etc/sysconfig/network-scripts/network-functions" mode="append">

# Load IPMI default settings only once, but keep a log of what we did.

if [ -f /etc/sysconfig/ipmi-settings ]; then
	. /etc/sysconfig/ipmi-settings
	mv /etc/sysconfig/ipmi-settings /etc/sysconfig/ipmi-settings.bak
fi
</file>

</post>


</kickstart> 

