<qandaentry id="faq-grub-stage2" xreflabel="Grub Stage2 Error">

<question>

	<para>
	I successfully installed all the Rolls, but during the last stage 
	after the machine reboots, the system hangs with the error:
	<emphasis>GRUB</emphasis> Loading Stage2.... What went wrong?
	</para>

</question>


<answer>

	<para>
	This is an intermittent problem we've seen in the lab as well.
	The installation is fine, except that the grub installation program,
	for an unknown reason, did not run correctly.
	</para>

	<para>
	Here is a workaround:
	</para>

	<itemizedlist>
	<listitem>
	<para>
	Put the Rocks Boot Roll CD in the frontend and boot the frontend.
	</para>
	</listitem>

	<listitem>
	<para>
	At the boot prompt, type:
	</para>
<screen>
frontend rescue
</screen>
	</listitem>

	<listitem>
	<para>
	A screen will appear, click the <emphasis>Continue</emphasis> button.
	</para>
	</listitem>

	<listitem>
	<para>
	When you see the shell prompt, execute:
	</para>
<screen>
# chroot /mnt/sysimage
</screen>
	</listitem>

	<listitem>
	<para>
	Run the grub installation program:
	</para>
<screen>
# /sbin/grub-install `awk -F= '/^#boot/ { print $2 }' /boot/grub/grub.conf`
</screen>

	<para>
	This should output something similar to:
	</para>

<screen>
Installation finished. No error reported.
This is the contents of the device map /boot/grub/device.map.
Check if this is correct or not. If any of the lines is incorrect,
fix it and re-run the script `grub-install'.

# this device map was generated by anaconda
(fd0)     /dev/fd0
(hd0)     /dev/hda
</screen>
	</listitem>

	<listitem>
	<para>
	Exit the chroot environment:
	</para>
<screen>
# exit
</screen>
	</listitem>

	<listitem>
	<para>
	Reboot the frontend.
	</para>
	</listitem>

	<listitem>
	<para>
	Take the CD out of the drive and the frontend should come up cleanly.
	</para>
	</listitem>

	</itemizedlist>

</answer>

</qandaentry>

